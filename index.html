<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Blocklyテスト</title>
</head>
<body>
<!-- Blocklyのライブラリ -->
<script src="blockly_compressed.js"></script>
<script src="blocks_compressed.js"></script>
<script src="javascript_compressed.js"></script>
<script src="en.js"></script>
<!-- 自作ブロックの定義 -->
<script src="myblock.js"></script>
<!-- ワークスペースのエリア -->
<div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
<button onclick="doCode()">コードの実行</button>
<!-- ツールボックスの定義 -->
<xml id="toolbox">
    <block type="go_ahead"></block>
    <block type="turn_right"></block>

</xml>
<script>
    //Blocklyをdivにはめ込み
    var workspace = Blockly.inject('blocklyDiv',
        {toolbox: document.getElementById('toolbox')});

    function doCode(){
        //ブロックからプログラム（文字列）を作成
        var code = Blockly.JavaScript.workspaceToCode(workspace);
        //プログラムを実行
        try{
            eval(code);
        }
        catch(e){
            alert(e);
        }
    }
</script>
</body>
</html>